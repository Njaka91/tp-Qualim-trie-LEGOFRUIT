<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <title>Todo</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
</head>

<body class="position-absolute start-0 top-0 end-0 bottom-0 d-flex justify-content-center align-items-center border">
  <form class="w-25 d-flex flex-column gap-3 align-items-center shadow-lg px-4 py-5" method="post" action="/user/login">
    <h1>TODO</h1>
    <div class="input-group">
      <span class="input-group-text">
        <i class="ph ph-user"></i>
      </span>
      <input type="text" name="username" placeholder="username" class="form-control p-3" required />
    </div>
    <div class="input-group">
      <span class="input-group-text">
        <i class="ph ph-lock"></i>
      </span>
      <input type="password" name="password" placeholder="password" class="form-control p-3 border-end-0 password" required />
      <span class="input-group-text">
        <i class="ph ph-eye-slash eye" th:onclick="'toggleEye(0)'"></i>
      </span>
    </div>
    <button type="submit" class="btn btn-primary p-3 w-100">Login</button>
    <p>
      No account ?
      <a href="" class="text-success text-decoration-none" data-bs-toggle="modal" data-bs-target="#signup">Sign Up</a>
    </p>
  </form>

  <div class="modal fade" id="signup" data-bs-backdrop="static">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5">Sign Up</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form method="post" class="d-flex flex-column gap-3" action="#" th:action="@{/user/add}" th:object="${user}">
            <div class="w-100">
              <label for="firstname">Firstname</label>
              <input type="text" id="firstname" name="firstname" class="form-control p-3" required />
            </div>
            <div class="w-100">
              <label for="lastname">Lastname</label>
              <input type="text" id="lastname" name="lastname" class="form-control p-3" required />
            </div>
            <div class="w-100">
              <label for="username">Username</label>
              <input type="text" id="username" name="username" class="form-control p-3" required />
            </div>
            <div class="w-100">
              <label for="password">Password</label>
              <div class="input-group">
                <input type="password" id="password" name="password" class="form-control p-3 border-end-0 password" required />
                <span class="input-group-text">
                  <i class="ph ph-eye-slash eye" th:onclick="'toggleEye(1)'"></i>
                </span>
              </div>
            </div>
            <button type="submit" class="btn btn-success w-100 p-3">Create account</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/@phosphor-icons/web@2.1.1"></script>
  <script>

    function hideMessage() {
      document.getElementById("message").className = "d-none"
    }

    function toggleEye(number) {
      const eye = document.getElementsByClassName("eye")[number]
      const password = document.getElementsByClassName("password")[number]
      if(eye.className === "ph ph-eye-slash eye"){
        eye.className = "ph ph-eye eye"
        password.setAttribute("type","text")
      }else{
        eye.className = "ph ph-eye-slash eye"
        password.setAttribute("type","password")
      }
    }

    setTimeout(() => {
      hideMessage()
    }, 3000)

  </script>
</body>

</html>